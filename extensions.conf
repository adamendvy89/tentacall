[general]
static=yes       ; These two lines prevent the command-line interface
writeprotect=yes ; from overwriting the file. Leave them here.
DYNAMIC_FEATURES=>automon				;For call recording on demand

#include "macro.conf"					;Definitions of functions/macros
#include "gentel.conf"					;External configuration for General Telecom
#include "testing.conf"                                 ;Isolated testing context

[kurt]
exten => _X.,1,Dial(SIP/5000)
exten => _X.,n,Hangup()


[ipcomm]                                               ;IP Communications Free DID 612-392-5548
exten => 6123925548,1,Dial(SIP/2005,20,wW)             ;Dial extension
exten => 6123925548,2,MailBoxExists(2005)              ;Ring for 20 then check if VM exists for the EXT
exten => 6123925548,n,Playback(unavail_no_vm)          ;Announce no VM avalable
exten => 6123925548,n,Hangup()                         ;Always hangup
exten => 6123925548,103,VoiceMail(2005@default)        ;Goto VM
exten => i,1,Macro(die)
exten => t,1,Hangup()

[sipgate]
exten => _X.,1,Answer()
exten => _X.,n,AGI(cc_app.agi)
exten => _X.,n,Hangup()


[external]
exten => 6463285825/_58XX,1,Macro(dial_eric)		;Automatucally direct office #'s to eric
;exten => 6468625191/_58xx,1,Macro(dial_eric)		;Automatucally direct office #'s to eric
;exten => 6468625191/_423648XXXX,1,Macro(dial_eric)	;Automatucally direct office #'s to eric
;exten => 6468625191/_646328XXXX,1,Macro(dial_eric)	;Automatucally direct office #'s to eric

exten => 6468625191,1,Answer()				;Answer the call and 
exten => 6468625191,n,Wait(1)
exten => 6468625191,n,Background(ivr_main)		;Play the ivr menu
#include "feature_codes.conf"				;One liner to get all the feature codes
exten => 102,1,Meetme(101,mM)
exten => 102,n,Playback(vm-goodbye)
exten => 102,n,Hangup()
exten => 100,1,Macro(conf)
exten => 100#,1,Macro(conf)
exten => 1,1,Macro(dial_eric)				;Call Eric
exten => 2,1,Macro(dial_rory)				;Call Rory
exten => _XXXX,1,Set(CDR(userfield)=${CALLERID(num)})
exten => _XXXX,n,Macro(dial_ext)			;Dial whatever extension the caller entered
exten => i,1,Macro(die)					;Invalid extension was entered so DIE!
exten => t,1,Hangup()					;On timeout hangup


[ccapp]
exten => ccdial,1,NOOP(ACCID=${ACCID} PATTERN=${PATTERN} RATE=${RATE} TIME=${TIME})
exten => ccdial,n,Dial(${PROTO}/${PEER}/${PATTERN},,L(${TIME}:20000:10000))
exten => ccdial,n,Playback(vm-goodbye)
exten => h,1,DeadAGI(cc_app_cleanup.agi)

[internal]
#include "feature_codes.conf"				;One liner to get all the feature codes
#include "hints.conf"                                   ;One liner to get all hints in

exten => 101,1,Meetme(101,pc)
exten => 101,n,Playback(vm-goodbye)
exten => 101,n,Hangup()

exten => 102,1,Answer()
exten => 102,n,Echo()
exten => 102,n,Hangup()

exten => 3449,1,Goto(score,s,1)

exten => 9999,1,Answer()
exten => 9999,n,Wait(1)
exten => 9999,n,Playback(spam)
exten => 9999,n,Hangup()

exten => _1000X,1,Set(CALLERID(num)=3455216)
exten => _1000X,2,Dial(SIP/${EXTEN}@sipgate,30,trg)
exten => _1000X,3,Hangup

exten => _*99XXXX,1,SipAddHeader(Call-Info: \;answer-after=0)
exten => _*99XXXX,n,Dial(SIP/${EXTEN:3:4})
exten => _*99XXXX,n,Hangup()                             ;testing redirect

exten => 837325,1,Dial(SIP/telephreak@voip.telephreak.org)
exten => 837325,2,Hangup()

exten => _9XXX,1,Macro(dial_covista)			;Dial covista extensions
exten => _58XX,1,Macro(dial_gentel)			;Dial office extensions
exten => _XXXX,1,Macro(dial_ext)			;Extension to extension dialing
exten => _9NXXNXXXXXX,1,Set(CALLERID(num)=${EXTEN:1})
exten => _9NXXNXXXXXX,n,Dial(SIP/telasip/${EXTEN:1})
exten => _NXXNXXXXXX,1,Set(CDR(userfield)=${CALLERID(num)})
exten => _NXXNXXXXXX,n,Macro(dial_out)			;Dial the outbound number
exten => _1NXXNXXXXXX,1,Set(CDR(userfield)=${CALLERID(num)})
exten => _1NXXNXXXXXX,n,Macro(dial_out)			;Dial the outbound number

exten => i,1,Macro(die)					;Invalid extension was entered so DIE!

[score]
exten => s,1,Answer()
exten => s,n,Wait(1)
exten => s,n,Playback(/tmp/score)
exten => s,n,Hangup()

[fakecid]
exten => s,1,Answer()
exten => s,n,Wait(1)
exten => s,n,Background(enter_cid)
exten => _NXXNXXXXXX,1,Set(CALLERID(num)=${EXTEN})
exten => _NXXNXXXXXX,2,Goto(fakedial,s,1)
exten => t,1,Hangup()

[fakedial]
exten => s,1,Background(enter_num)
exten => _NXXNXXXXXX,1,Dial(SIP/telasip/${EXTEN})
exten => _NXXNXXXXXX,2,Hangup()

[spy]
exten => s,1,Answer()
exten => s,n,Wait(1)
exten => s,n,Background(enter_channel)
exten => _XXXX,1,ChanSpy(${EXTEN})
exten => _XXXX,n,Hangup()
exten => 0,1,ChanSpy(all)
exten => 0,n,Hangup()

[sip-general]
include => internal
include => external
